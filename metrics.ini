[ScreenInit]
ShowHeader=false
ShowFooter=false

[ScreenTitleJoin]
ScrollerOnCommand=%function(self) self:visible(false) end

[ScreenJukebox]
LifeP1OnCommand=visible,false
ScoreP1OnCommand=visible,false
LifeP2OnCommand=visible,false
ScoreP2OnCommand=visible,false

[ScreenJukeboxMenu]
ExplanationTogetherX=SCREEN_CENTER_X-266
ExplanationTogetherY=SCREEN_CENTER_Y+141
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1100;vertalign,top;horizalign,left;cropright,1;linear,0.5;cropright,0

[ScreenSyncOverlay]
Class="ScreenSyncOverlay"
Fallback="Screen"
StatusOnCommand=x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+150;shadowlength,2;zoom,0.5
AdjustmentsOnCommand=x,SCREEN_CENTER_X+160;y,SCREEN_CENTER_Y;zoom,0.5

[ScreenSelectStyle]
Class="ScreenSelectMaster"
Fallback="ScreenSelectMaster"
InitCommand=fov,60
PrevScreen="ScreenTitleMenu"
TimerSeconds=20
# It would be better to have a mechanism to attach message commands to screens,
# and then call UpdateSelectableChoices() from there.
UpdateOnMessage=ControllersChanged
ChoiceNames="1,2,3"
Choice1="stopmusic;style,single;screen,ScreenSelectPlayMode;name,Single"
Choice2="stopmusic;style,versus;screen,ScreenSelectPlayMode;name,Versus"
Choice3="stopmusic;style,double;screen,ScreenSelectPlayMode;name,Double"
DefaultChoice=1
StyleIcon=0
MemoryCardIcons=1
OverrideSleepAfterTweenOffSeconds=1
SleepAfterTweenOffSeconds=1
OverrideLockInputSeconds=1
LockInputSeconds=0.5
WrapCursor=1


# The default is 2, so if we start with two players joined, we default
# to 2-player.  "2:1" here means that if we start with only one joined,
# and 2-player isn't available, we'll fall back on 1-player (not doubles).
OptionOrderUp="3:2,2:1"
OptionOrderDown="1:2,2:3"
OptionOrderLeft="3:2,2:1"
OptionOrderRight="1:2,2:3"

NumIconParts=0
NumCursorParts=0
NumPreviewParts=1
ShowScroller=1
WrapScroller=1
ScrollerFastCatchup=1

PreviewPart1X=SCREEN_CENTER_X-80
PreviewPart1Y=SCREEN_CENTER_Y+130
PreviewPart1OnCommand=draworder,101
PreviewPart2X=SCREEN_CENTER_X-80
PreviewPart2Y=SCREEN_CENTER_Y+130
PreviewPart2OnCommand=draworder,101
PreviewPart3X=SCREEN_CENTER_X-80
PreviewPart3Y=SCREEN_CENTER_Y+130
PreviewPart3OnCommand=draworder,101
PreviewPart4X=SCREEN_CENTER_X-80
PreviewPart4Y=SCREEN_CENTER_Y+130
PreviewPart4OnCommand=draworder,101

ScrollerX=SCREEN_CENTER_X
ScrollerY=SCREEN_CENTER_Y+12
ScrollerOnCommand=%function(self) self:fov(30) self:z(-200); self:SetDrawByZPosition(true) end
ScrollerOffCommand=
ScrollerTransform=function(self,offset,itemIndex,numItems) local theta=offset*math.pi*2/numItems; self:x(math.sin(theta)*200); self:z(math.cos(theta)*200); self:y(self:GetZ()/2.2-20); local focus=scale(self:GetZ(),0,200,-1,1); focus=clamp(focus,0,1); local bright=scale(focus,0,1,0.15,1); self:diffuse(bright,bright,bright,1); local zoomv=scale(focus,0,1,0.7,1); self:zoom(zoomv); end
ScrollerSecondsPerItem=0.3
ScrollerNumItemsToDraw=15
ScrollGainFocusCommand=zoomz,1.1
ScrollLoseFocusCommand=zoomz,1
NumChoicesOnPage1=4
SharedPreviewAndCursor=1
CursorPart1P1OffsetXFromIcon=0
CursorPart1P1OffsetYFromIcon=0
CursorPart1P2OffsetXFromIcon=0
CursorPart1P2OffsetYFromIcon=0
CursorPart1OnCommand=draworder,1;zoom,0;sleep,.4;linear,.2;zoom,1
CursorPart1ChangeCommand=
PreSwitchPageSeconds=0
PostSwitchPageSeconds=0
DisabledColor=.5,.5,.5,0
ExplanationPage1X=-1000
ExplanationPage1Y=-1000
ExplanationPage1SwitchToPage1Command=
ExplanationPage1SwitchToPage2Command=
ExplanationPage1OnCommand=
ExplanationPage1OffCommand=
ExplanationPage2X=-1000
ExplanationPage2Y=-1000
ExplanationPage2SwitchToPage1Command=
ExplanationPage2SwitchToPage2Command=
ExplanationPage2OnCommand=
ExplanationPage2OffCommand=
MorePage1X=SCREEN_CENTER_X-180
MorePage1Y=SCREEN_CENTER_Y-100
MorePage1SwitchToPage1Command=
MorePage1SwitchToPage2Command=
MorePage1OnCommand=
MorePage1OffCommand=
MorePage2X=SCREEN_CENTER_X-180
MorePage2Y=SCREEN_CENTER_Y-100
MorePage2SwitchToPage1Command=
MorePage2SwitchToPage2Command=
MorePage2OnCommand=
MorePage2OffCommand=
IdleCommentSeconds=0
IdleTimeoutSeconds=0

[ScreenTitleMenu]
ScrollerX=SCREEN_CENTER_X-200
ScrollerY=SCREEN_CENTER_Y-128
ScrollerTransform=function(self,offset,itemIndex,numItems) self:y(32*offset); end

DefaultChoice="GameStart"
ChoiceNames="GameStart,Options,Edit,Jukebox,GameSelect,TestScreen,Exit"
ChoiceGameStart="applydefaultoptions;text,Game Start;screen,ScreenProfileLoad"
#ChoiceQuickPlay="applydefaultoptions;text,Quick Play;"
ChoiceOptions="screen,ScreenOptionsService;text,Options"
ChoiceTestScreen="screen,ScreenThemeTest;text,Test"
ChoiceEdit="text,Edit/Share;screen,"..Branch.OptionsEdit()
ChoiceExit="screen,ScreenExit;text,Exit"

PrevScreen="ScreenCompany"

[ScreenProfileLoad]
NextScreen="ScreenCaution"
PrevScreen=Branch.TitleMenu()

[ScreenCompany]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen=WarnScreen()
PrevScreen="ScreenInit"
ForceTimer=true
PlayMusic=true
NextScreen="ScreenIntro"
TimerSeconds=6
HeaderX=SCREEN_CENTER_X
HeaderY=SCREEN_TOP+40
HeaderOnCommand=
HeaderOffCommand=

[ScreenAttract]
TimerOnCommand=visible,false

[ScreenIntro]
Class="ScreenAttract"
Fallback="ScreenAttract"
TimerSeconds=32
ForceTimer=true
PlayMusic=true
NextScreen="ScreenLogo"

[ScreenLogo]
NextScreen="ScreenDemonstration"

[ScreenDemonstration]
Fallback="ScreenGameplay"
Class="ScreenDemonstration"
NextScreen="ScreenDemonstration2"
PrevScreen=Branch.NoiseTrigger()
StartScreen=Branch.TitleMenu()
PlayMusic=false
SecondsToShow=60

LightsMode="LightsMode_Demonstration"
DifficultiesToShow="easy,medium,hard,challenge"
ShowCourseModifiersProbability=0
AllowAdvancedModifiers=false
AllowStyleTypes="TwoPlayersTwoSides"

MinSecondsToStep=0
MinSecondsToMusic=0

[ScreenDemonstration2]
Fallback="ScreenGameplay"
Class="ScreenDemonstration"
NextScreen="ScreenRanking"
SecondsToShow=40

LightsMode="LightsMode_Demonstration"
DifficultiesToShow="beginner"
ShowCourseModifiersProbability=0
AllowAdvancedModifiers=false
AllowStyleTypes="OnePlayerOneSide"
LifeP1OnCommand=visible,false
ScoreP1OnCommand=visible,false

MinSecondsToStep=0
MinSecondsToMusic=0

[ScreenWithMenuElements]
TimerX=SCREEN_RIGHT-56
TimerY=SCREEN_TOP+40
TimerOffCommand=accelerate,0.3;addx,200;
TimerOnCommand=%function(self) MenuTimerSet(self) end

[MenuTimer]
WarningStart=6
WarningBeepStart=6
MaxStallSeconds=0
Text1OnCommand=stoptweening;shadowlength,4;x,2;horizalign,right;skewx,-0.2;glowshift;effectperiod,1
Text1FormatFunction=function(fSeconds) fSeconds=math.floor(fSeconds); return string.format("%02.0f",fSeconds) end
Text2OnCommand=stoptweening;shadowlength,4;zoom,0.7;x,3;y,5;horizalign,left;skewx,-0.2;glowshift;effectperiod,1
Text2FormatFunction=function(fSeconds) local remainder=fSeconds-math.floor(fSeconds); local digit=math.floor(remainder*10); return "."..digit end
WarningCommand6=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1); self:glowblink(); self:effectperiod(0.1666); self:effectcolor1(1,0,0,1); self:effectcolor2(1,0,0,0); end
WarningCommand5=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1); end
WarningCommand4=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1); end
WarningCommand3=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1); end
WarningCommand2=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1); end
WarningCommand1=%function(self,parent) parent:stoptweening(); parent:zoom(1.4); parent:linear(0.2); parent:zoom(1); end
WarningCommand0=%function(self,parent) parent:stoptweening(); parent:zoom(1.0); parent:stopeffect(); end

[ScreenEvaluation]
ShowComboGraph=true
DisqualifiedP1X=SCREEN_CENTER_X-98
DisqualifiedP1Y=SCREEN_CENTER_Y-12
DisqualifiedP1OffCommand=accelerate,0.3;addx,-SCREEN_WIDTH
DisqualifiedP1OnCommand=draworder,1;zoom,0.5;glowshift;effectcolor2,1,.9,0.2,0.8;addx,-SCREEN_WIDTH;sleep,3;decelerate,0.3;addx,SCREEN_WIDTH
DisqualifiedP2X=SCREEN_CENTER_X+186
DisqualifiedP2Y=SCREEN_CENTER_Y-12
DisqualifiedP2OffCommand=accelerate,0.3;addx,SCREEN_WIDTH
DisqualifiedP2OnCommand=draworder,1;zoom,0.5;glowshift;effectcolor2,1,.9,0.2,0.8;addx,SCREEN_WIDTH;sleep,3;decelerate,0.3;addx,-SCREEN_WIDTH

#######################
#Â Graph/Combo display information
#######################
[GraphDisplay]
BodyWidth=271
BodyHeight=40

[GraphDisplayP1]
Fallback="GraphDisplay"

[GraphDisplayP2]
Fallback="GraphDisplay"

[ComboGraph]
BodyWidth=271
BodyHeight=18

[ComboGraphP1]
Fallback="ComboGraph"

[ComboGraphP2]
Fallback="ComboGraph"

[PlayerStageStats]
NumGradeTiersUsed=17
GradeTier01IsAllW2s=false
GradeTier02IsAllW2s=false
GradePercentTier01=1.00
GradePercentTier02=0.99
GradePercentTier03=0.98
GradePercentTier04=0.96
GradePercentTier05=0.94
GradePercentTier06=0.92
GradePercentTier07=0.89
GradePercentTier08=0.86
GradePercentTier09=0.83
GradePercentTier10=0.80
GradePercentTier11=0.76
GradePercentTier12=0.72
GradePercentTier13=0.68
GradePercentTier14=0.64
GradePercentTier15=0.60
GradePercentTier16=0.55
GradePercentTier17=-999


[ScreenThemeTest]
Class="ScreenAttract"
Fallback="ScreenAttract"
NextScreen=WarnScreen()
PrevScreen="ScreenInit"
TimerSeconds=100
TimerStealth=true
ShowHeader=true
HeaderX=SCREEN_CENTER_X
HeaderY=SCREEN_TOP+40
HeaderOnCommand=
HeaderOffCommand=

[OptionsUnderline]
# STEPMANIA 5.
# YOU'RE GIVING ME TOO MUCH CONTROL
# PLEASE STOP.

[OptionsUnderline]
Fallback="OptionsCursor"

[OptionsUnderlineP1]
Fallback="OptionsUnderline"
LeftX=0
MiddleX=0
RightX=0
LeftY=-6
MiddleY=-6
RightY=-6

[OptionsUnderlineP2]
Fallback="OptionsUnderline"
LeftX=0
MiddleX=0
RightX=0
LeftY=8
MiddleY=8
RightY=8

[ScreenOptions]
NumRowsShown=8
RowPositionTransformFunction=function(self,positionIndex,itemIndex,numItems) self:y( (SCREEN_CENTER_Y-115) + (28*positionIndex) ); end
TimerOnCommand=%function(self) MenuTimerSet(self) end
RowOnCommand=addx,-SCREEN_WIDTH;decelerate,0.3;addx,SCREEN_WIDTH
RowOffCommand=accelerate,0.3;addx,SCREEN_WIDTH
ShowExitRow=true
SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+112
ShowScrollBar=true
ScrollBarX=SCREEN_CENTER_X-285
ScrollBarY=SCREEN_CENTER_Y+2
ScrollBarOnCommand=addx,-SCREEN_WIDTH;decelerate,0.145;addx,SCREEN_WIDTH
ScrollBarOffCommand=accelerate,0.3;addx,SCREEN_WIDTH
ScrollBarHeight=240
ScrollBarTime=.2
CursorOnCommand=addx,-SCREEN_WIDTH;decelerate,0.1;addx,SCREEN_WIDTH
CursorOffCommand=accelerate,0.3;addx,SCREEN_WIDTH
CursorTweenSeconds=0.1
LineHighlightP1OnCommand=ztest,true;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#FFFFFF77");diffusealpha,1;
LineHighlightP1ChangeCommand=
LineHighlightP1ChangeToExitCommand=
LineHighlightP1OffCommand=accelerate,0.3;addx,SCREEN_WIDTH
LineHighlightP2OnCommand=ztest,true;diffuseshift;effectcolor1,color("#FFFFFF");effectcolor2,color("#FFFFFF77");diffusealpha,1
LineHighlightP2ChangeCommand=
LineHighlightP2ChangeToExitCommand=
LineHighlightP2OffCommand=accelerate,0.3;addx,SCREEN_WIDTH

DisqualifyP1X=SCREEN_CENTER_X-160
DisqualifyP1Y=SCREEN_CENTER_Y+111
DisqualifyP1OnCommand=addx,-SCREEN_WIDTH;decelerate,0.1;addx,SCREEN_WIDTH;zoom,0.5;glowshift;effectcolor2,color("1,.9,0.2,0.8")
DisqualifyP1OffCommand=accelerate,0.3;addx,SCREEN_WIDTH
DisqualifyP2X=SCREEN_CENTER_X+160
DisqualifyP2Y=SCREEN_CENTER_Y+111
DisqualifyP2OnCommand=addx,-SCREEN_WIDTH;decelerate,0.1;addx,SCREEN_WIDTH;zoom,0.5;glowshift;effectcolor2,color(".4,1,.2,0.8")
DisqualifyP2OffCommand=accelerate,0.3;addx,SCREEN_WIDTH

MoreX=SCREEN_CENTER_X-1
MoreY=SCREEN_CENTER_Y+112
MoreOnCommand=
MoreOffCommand=accelerate,0.3;addx,SCREEN_WIDTH
MoreExitSelectedP1Command=
MoreExitSelectedP2Command=
MoreExitUnselectedP1Command=
MoreExitUnselectedP2Command=

ExplanationP1X=SCREEN_CENTER_X-268
ExplanationP1Y=SCREEN_CENTER_Y+140
ExplanationP1OnCommand=zoom,0.5;wrapwidthpixels,500;valign,0;halign,0;shadowlength,2;cropright,1;linear,0.5;cropright,0;diffuse,PlayerColor(PLAYER_1)
ExplanationP2X=SCREEN_CENTER_X+28
ExplanationP2Y=SCREEN_CENTER_Y+140
ExplanationP2OnCommand=zoom,0.5;wrapwidthpixels,500;valign,0;halign,0;shadowlength,2;cropright,1;linear,0.5;cropright,0;diffuse,PlayerColor(PLAYER_2)

[ScreenMapControllers]
LinesVisible=16
LinesVisible=8

# The position of the Devices list and its On/Off commands.
DevicesX=SCREEN_CENTER_X
DevicesY=SCREEN_CENTER_Y+140
DevicesOnCommand=vertalign,top;maxheight,92;zoom,0.75;draworder,5;strokecolor,color("0,0,0,1")
DevicesOffCommand=accelerate,0.3;addy,SCREEN_HEIGHT

LineScrollerOnCommand=%function(self) self:draworder(-1); self:y(128) self:setsecondsperitem(0.1) self:SetTransformFromHeight(28) self:ztest(1) end
LineScrollerOffCommand=
LineHideCommand=visible,false
LineOnCommand=%function(self) self:y(0); self:visible(true); local LeftToRight = math.mod(self.ItemIndex, 2) == 0 and 1 or -1; self:addx(-SCREEN_WIDTH * LeftToRight); end
LineOffCommand=%function(self) local LeftToRight = math.mod(self.ItemIndex, 2) == 0 and 1 or -1; self:stoptweening() self:accelerate(0.3); self:addx(SCREEN_WIDTH * LeftToRight); self:queuecommand('Hide') end
# The "P1 slots" and "P2 slots" labels.  Use the entries in en.ini to change text.
LabelP1OnCommand=x,SCREEN_CENTER_X*0.4;zoom,0.7;shadowlength,1
LabelP1OffCommand=linear,0.5;diffusealpha,0
LabelP2OnCommand=x,SCREEN_CENTER_X*1.6;zoom,0.7;shadowlength,1
LabelP2OffCommand=linear,0.5;diffusealpha,0
# The primary effect of keys on this row.
PrimaryOnCommand=x,SCREEN_CENTER_X;y,0;zoom,0.5;shadowlength,1;ztest,true
# The secondary effect of keys on this row.
SecondaryOnCommand=x,SCREEN_CENTER_X;y,9;zoom,0.5;shadowlength,1;ztest,true
ListHeaderOnCommand=diffuse,color("#808080");shadowlength,0;max_dimension_use_zoom,true;zoom,0.75;maxwidth,130;

LabelP1OnCommand=x,SCREEN_CENTER_X*0.4;zoom,0
LabelP1OffCommand=linear,0.5;diffusealpha,0
LabelP2OnCommand=x,SCREEN_CENTER_X*1.6;zoom,0
LabelP2OffCommand=linear,0.5;diffusealpha,0

ListHeaderP1S1Command=x,SCREEN_CENTER_X-230;ztest,1
ListHeaderP1S2Command=x,SCREEN_CENTER_X-160;ztest,1
ListHeaderP1S3Command=x,SCREEN_CENTER_X-80;ztest,1
ListHeaderP2S1Command=x,SCREEN_CENTER_X+80;ztest,1
ListHeaderP2S2Command=x,SCREEN_CENTER_X+160;ztest,1
ListHeaderP2S3Command=x,SCREEN_CENTER_X+230;ztest,1
ListHeaderCenterOnCommand=x,SCREEN_CENTER_X;y,-30;zoom,0;shadowlength,1;ztest,1
# The positions of the elements showing what is mapped.
MappedToP1S1Command=x,SCREEN_CENTER_X-230;ztest,1
MappedToP1S2Command=x,SCREEN_CENTER_X-160;ztest,1
MappedToP1S3Command=x,SCREEN_CENTER_X-80;ztest,1
MappedToP2S1Command=x,SCREEN_CENTER_X+80;ztest,1
MappedToP2S2Command=x,SCREEN_CENTER_X+160;ztest,1
MappedToP2S3Command=x,SCREEN_CENTER_X+230;ztest,1
# These commands are shared between all the elements.
ListHeaderOnCommand=diffuse,color("#808080");shadowlength,0;max_dimension_use_zoom,true;zoom,0.75;maxwidth,130;ztest,1
MappedToOnCommand=diffuse,color("#808080");shadowlength,0;zoom,0.6;max_dimension_use_zoom,true;maxwidth,130;ztest,1
# WaitingCommand is executed when the player hits enter to set a key.
MappedToWaitingCommand=diffuse,color("#FF8080");pulse;effectperiod,0.5;effectmagnitude,0.8,1.3,0
# MappedInputCommand is executed after the player maps the key.
MappedToMappedInputCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
MappedToGainFocusCommand=diffuse,color("#808080");diffuseshift;effectcolor2,color("#808080");effectcolor1,color("#FFFFFF")
MappedToLoseFocusCommand=diffuse,color("#808080");stopeffect
# GainMarkCommand is executed when the player adds the element to the set list.
MappedToGainMarkCommand=textglowmode,'TextGlowMode_Inner';glow,color("#FF00007f")
# LoseMarkCommand is executed when the player removes the element from the set list.
MappedToLoseMarkCommand=textglowmode,'TextGlowMode_Inner';glow,color("#FF000000")
# The primary effect of keys on this row.
PrimaryOnCommand=x,SCREEN_CENTER_X;y,-6;zoom,0.7;shadowlength,1;ztest,1
# The secondary effect of keys on this row.
SecondaryOnCommand=x,SCREEN_CENTER_X;y,6;zoom,0.5;shadowlength,1;ztest,1

[ScreenEdit]
InputTipsOnCommand=hidden,1
InfoX=SCREEN_RIGHT-140
InfoY=SCREEN_CENTER_Y
InfoOnCommand=horizalign,left;zoom,0.5;shadowlength,2;draworder,-1
PlayRecordHelpX=SCREEN_LEFT+40
PlayRecordHelpY=SCREEN_BOTTOM-40
PlayRecordHelpOnCommand=horizalign,left;zoom,0.5;shadowlength,2
EditHelpOnCommand=visible,false

[TextBannerEditMode]
Fallback="TextBanner"

[EditMenu]
EditMode="EditMode_Full"
ShowGroups=true

Arrows1X=SCREEN_CENTER_X-140
Arrows2X=SCREEN_CENTER_X+260
ArrowsEnabledCommand=diffuse,color("1,1,1,1");
ArrowsDisabledCommand=diffuse,color("0.0.4,0.0.4,0.0.4,1");

SongBannerX=SCREEN_CENTER_X+170
SongBannerY=SCREEN_CENTER_Y-90
GroupBannerOnCommand=scaletoclipped,120,40

TextBannerType="TextBannerEditMode"
SongTextBannerX=SCREEN_CENTER_X-10
SongTextBannerY=SCREEN_CENTER_Y-90

StepsDisplayX=SCREEN_CENTER_X+170
StepsDisplayY=SCREEN_CENTER_Y-10
StepsDisplaySourceX=SCREEN_CENTER_X+170
StepsDisplaySourceY=SCREEN_CENTER_Y+50

Row1Y=SCREEN_CENTER_Y-140
Row2Y=SCREEN_CENTER_Y-90
Row3Y=SCREEN_CENTER_Y-40
Row4Y=SCREEN_CENTER_Y-10
Row5Y=SCREEN_CENTER_Y+20
Row6Y=SCREEN_CENTER_Y+50
Row7Y=SCREEN_CENTER_Y+80

Label1X=SCREEN_CENTER_X-250
Label1OnCommand=shadowlength,1;zoom,0.5;horizalign,left
Label2X=SCREEN_CENTER_X-250
Label2OnCommand=shadowlength,1;zoom,0.5;horizalign,left
Label3X=SCREEN_CENTER_X-250
Label3OnCommand=shadowlength,1;zoom,0.5;horizalign,left
Label4X=SCREEN_CENTER_X-250
Label4OnCommand=shadowlength,1;zoom,0.5;horizalign,left
Label5X=SCREEN_CENTER_X-250
Label5OnCommand=shadowlength,1;zoom,0.5;horizalign,left
Label6X=SCREEN_CENTER_X-250
Label6OnCommand=shadowlength,1;zoom,0.5;horizalign,left
Label7X=SCREEN_CENTER_X-250
Label7OnCommand=shadowlength,1;zoom,0.5;horizalign,left

Value1X=SCREEN_CENTER_X-24
Value1OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65
Value2X=SCREEN_CENTER_X+60
Value2OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65
Value3X=SCREEN_CENTER_X+60
Value3OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65
Value4X=SCREEN_CENTER_X
Value4OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65
Value5X=SCREEN_CENTER_X+60
Value5OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65
Value6X=SCREEN_CENTER_X
Value6OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65
Value7X=SCREEN_CENTER_X+60
Value7OnCommand=shadowlength,1;zoom,0.5;maxwidth,SCREEN_CENTER_X*0.65

[ScreenEditMenu]
ExplanationX=SCREEN_CENTER_X
ExplanationY=SCREEN_CENTER_Y+134
ExplanationOnCommand=wrapwidthpixels,900;zoom,0.6;shadowlength,0;cropright,1;linear,0.5;cropright,0
NumStepsLoadedFromProfileX=SCREEN_RIGHT-180
NumStepsLoadedFromProfileY=SCREEN_TOP+42
NumStepsLoadedFromProfileOnCommand=visible,false

[ScreenMiniMenuMainMenu]
Fallback="ScreenMiniMenu"
TitleX=SCREEN_CENTER_X-80

MoreOnCommand=visible,false
ShowScrollBar=false

[OptionRow]
ShowBpmInSpeedTitle=true
ItemsOnCommand=shadowlength,0;zoom,0.5;spin
TitleX=SCREEN_CENTER_X-270
TitleOnCommand=shadowlength,0;zoom,.5;halign,0;wrapwidthpixels,180
ItemsStartX=SCREEN_CENTER_X-150
ItemsEndX=SCREEN_CENTER_X+180
ItemsGapX=10
ItemsOnCommand=shadowlength,0;zoom,0.5;
ItemsLongRowP1X=SCREEN_CENTER_X-60
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X

[OptionRowService]
TitleX=SCREEN_CENTER_X-160
TitleY=
TitleOnCommand=shadowlength,0;zoom,.5;halign,0;
TitleGainFocusCommand=diffuse,color("1,1,1,1");
TitleLoseFocusCommand=diffuse,color("0.5,0.5,0.5,1");
ItemsOnCommand=shadowlength,0;zoom,0.5;spin

[ScreenSystemLayer]
CreditsP1X=SCREEN_LEFT+38
CreditsP1Y=SCREEN_BOTTOM-12
CreditsP1OnCommand=shadowlength,0;horizalign,left;vertalign,bottom;zoom,0.5
CreditsP2X=SCREEN_RIGHT-38
CreditsP2Y=SCREEN_BOTTOM-12
CreditsP2OnCommand=shadowlength,0;horizalign,right;vertalign,bottom;zoom,0.5
MessageX=0
MessageY=0
MessageOnCommand=finishtweening;horizalign,left;x,SCREEN_LEFT+20;y,SCREEN_TOP+80;zoom,0.6;shadowlength,2;diffusealpha,1;addx,-SCREEN_WIDTH;linear,0.5;addx,SCREEN_WIDTH
MessageOffCommand=sleep,5;linear,0.5;diffusealpha,0
MessageFrameX=0
MessageFrameY=0
MessageFrameOnCommand=DrawOrder,-1;finishtweening;x,SCREEN_CENTER_X;y,SCREEN_TOP+80;diffusealpha,0;linear,0.5;diffusealpha,0.5
MessageFrameOffCommand=sleep,5;linear,0.5;diffusealpha,0

[ScreenOptionsService]
LineNames="GameType,GraphicSound,KeyConfig,Arcade,InputOptions,SoundGraphics,Profiles,Network,Advanced,Reload,Credits,ThemePref"

LineSync="gamecommand;screen,ScreenGameplaySyncMachine;name,Calibrate Machine Sync"
LineGameType="gamecommand;screen,ScreenSelectGame;name,Select Game"
LineKeyConfig="gamecommand;screen,ScreenMapControllers;name,Key Joy Mappings"
LineTestInput="gamecommand;screen,ScreenTestInput;name,Test Input"
LineInput="gamecommand;screen,ScreenOptionsInput;name,Input Options"
LineReload="gamecommand;screen,ScreenReloadSongs;name,Reload Songs"
LineArcade="gamecommand;screen,ScreenOptionsArcade;name,Arcade Options"
LineAppearance="gamecommand;screen,ScreenAppearanceOptions;name,Appearance Options"
LineBGFit="gamecommand;screen,ScreenSetBGFit;name,Set BG Fit Mode"
LineOverscan="gamecommand;screen,ScreenOverscanConfig;name,Overscan Correction"
LineGraphicSound="gamecommand;screen,ScreenOptionsGraphicsSound;name,Graphics/Sound Options"
LineProfiles="gamecommand;screen,ScreenOptionsManageProfiles;name,Profiles"
LineNetwork="gamecommand;screen,ScreenNetworkOptions;name,Network Options"
LineUI="gamecommand;screen,ScreenOptionsUI;name,UI Options"
LineAdvanced="gamecommand;screen,ScreenOptionsAdvanced;name,Advanced Options"
LineMoreOptions="gamecommand;screen,ScreenOptionsExtended;name,More Options"
LineCredits="gamecommand;screen,ScreenCredits;name,StepMania Credits"
LineSoundGraphics="gamecommand;screen,ScreenOptionsDisplaySub;name,Display Options"
LineInputOptions="gamecommand;screen,ScreenOptionsInputSub;name,InputOptions"
LineThemePref="gamecommand;screen,ScreenOptionsTheme;name,Theme Options"

[ScreenOptionsTheme]
Fallback="ScreenOptionsServiceChild"
NextScreen="ScreenOptionsService"
PrevScreen="ScreenOptionsService"
LineNames="MarathonLabel"
LineMarathonLabel="lua,ThemePrefRow('MarathonLabel')"

[ScreenMiniMenu]
NumRowsShown=30
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) local indexOffset = itemIndex-(numItems-1)/2; self:y( SCREEN_CENTER_Y + indexOffset * 15 ); self:zoom(0.5) end
MoreOnCommand=visible,false
ShowScrollBar=false

[ScreenMiniMenuBackgroundChange]
NumRowsShown=30
RowPositionTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) local indexOffset = itemIndex-(numItems-1)/2; self:y( SCREEN_CENTER_Y + indexOffset * 15 ); self:zoom(0.5) end

[ScreenMiniMenuAreaMenu]
Fallback="ScreenMiniMenu"

[OptionRowMiniMenu]
Fallback="OptionRow"
IconsP1X=SCREEN_CENTER_X-280
IconsP2X=SCREEN_CENTER_X+280
IconsOnCommand=x,-30
FrameX=SCREEN_CENTER_X-232
TitleX=SCREEN_CENTER_X-150
TitleOnCommand=halign,0;shadowlength,2;
ItemsStartX=SCREEN_CENTER_X+150
ItemsEndX=SCREEN_CENTER_X+280
ItemsGapX=14
ItemsLongRowP1X=SCREEN_CENTER_X+200
ItemsLongRowP2X=SCREEN_CENTER_X+100
ItemsLongRowSharedX=SCREEN_CENTER_X+150
ItemOnCommand=addx,300
ColorSelected=color("0.5,1,0.5,1")
ColorNotSelected=color("1,1,1,1")
ColorDisabled=color("0.65,0,0,1")
TweenSeconds=0

[ScreenOptionsServiceChild]
NumRowsShown=8
RowPositionTransformFunction=function(self,positionIndex,itemIndex,numItems) self:y( (SCREEN_CENTER_Y-115) + (28*positionIndex) ); end
StopMusicOnBack=false
SeparateExitRow=true
ExplanationTogetherX=SCREEN_CENTER_X-266
ExplanationTogetherY=SCREEN_CENTER_Y+141
ExplanationTogetherOnCommand=zoom,0.5;wrapwidthpixels,1100;vertalign,top;horizalign,left;cropright,1;linear,0.5;cropright,0

[ScreenOptionsSimpleService]
NumRowsShown=8
RowPositionTransformFunction=function(self,positionIndex,itemIndex,numItems) self:y( (SCREEN_CENTER_Y-115) + (28*positionIndex) ); end
StopMusicOnBack=false
SeparateExitRow=true
SeparateExitRowY=SCREEN_CENTER_Y+112
LineHighlightP1OnCommand=ztest,1;diffusealpha,1;addx,-SCREEN_WIDTH;decelerate,0.135;addx,SCREEN_WIDTH
LineHighlightP1ChangeCommand=
LineHighlightP1ChangeToExitCommand=
LineHighlightP2OnCommand=ztest,1;diffusealpha,1;addx,-SCREEN_WIDTH;decelerate,0.135;addx,SCREEN_WIDTH
LineHighlightP2ChangeCommand=
LineHighlightP2ChangeToExitCommand=
ExplanationTogetherX=SCREEN_CENTER_X-266
ExplanationTogetherY=SCREEN_CENTER_Y+141
ExplanationTogetherOnCommand=draworder,101;zoom,0.5;wrapwidthpixels,1100;vertalign,top;horizalign,left;cropright,1;linear,0.5;cropright,0
ExplanationTogetherOffCommand=finishtweening;accelerate,0.3;addx,SCREEN_WIDTH

[ScoreDisplayPercentage Percent]
PercentFormat="%2d"
PercentP1X=0
PercentP1Y=0
PercentP1OnCommand=shadowlength,0;diffuse,color("#FBBE03")
PercentP1OffCommand=
PercentP2X=0
PercentP2Y=0
PercentP2OnCommand=shadowlength,0;diffuse,color("#56FF48")
PercentP2OffCommand=
PercentUseRemainder=false
ApplyScoreDisplayOptions=true
Format=FormatPercentScore
PercentDecimalPlaces=2
PercentTotalSize=5
RemainderFormat=

[ScreenGameplay]
PlayerP1OnePlayerOneSideX=SCREEN_CENTER_X-(SCREEN_WIDTH*160/660)
PlayerP2OnePlayerOneSideX=SCREEN_CENTER_X+(SCREEN_WIDTH*160/660)
PlayerP1TwoPlayersTwoSidesX=SCREEN_CENTER_X-(SCREEN_WIDTH*160/660)
PlayerP2TwoPlayersTwoSidesX=SCREEN_CENTER_X+(SCREEN_WIDTH*160/660)
PlayerP1OnePlayerBothSidesX=SCREEN_CENTER_X
PlayerP2OnePlayerBothSidesX=SCREEN_CENTER_X
MinSecondsToStep=2.0
MinSecondsToMusic=0.0
MinSecondsToStepNextSong=2.0
MusicFadeOutSeconds=0.5
OutTransitionLength=5
CourseTransitionLength=0.5
BeginFailedDelay=1.0
LifeFrameX=0
LifeFrameY=0
LifeFrameOnCommand=visible,false
LifeFrameOffCommand=
LifeP1OnCommand=rotationz,-90;addx,-100;sleep,0.5;decelerate,0.8;addx,100;draworder,-1
LifeP1OffCommand=accelerate,0.8;addx,-100
LifeP1X=SCREEN_LEFT+30
LifeP1Y=SCREEN_CENTER_Y+30
LifeP2OnCommand=rotationz,-90;addx,100;sleep,0.5;decelerate,0.8;addx,-100;draworder,-1
LifeP2OffCommand=accelerate,0.8;addx,100
LifeP2X=SCREEN_RIGHT-30
LifeP2Y=SCREEN_CENTER_Y+30
ShowScoreInRave=0
ScoreP1OffCommand=accelerate,0.8;addy,-100
ScoreP1OnCommand=addy,-100;sleep,0.5;decelerate,0.8;addy,100
ScoreP1X=SCREEN_CENTER_X-180
ScoreP1Y=SCREEN_TOP+56
ScoreP2OffCommand=accelerate,0.8;addy,-100
ScoreP2OnCommand=addy,-100;sleep,0.5;decelerate,0.8;addy,100
ScoreP2X=SCREEN_CENTER_X+180
ScoreP2Y=SCREEN_TOP+56
StageX=SCREEN_CENTER_X
StageY=SCREEN_CENTER_Y
# The Overlay is 100.  Draw over it.
StageOnCommand=DrawOrder,105;zoom,1;sleep,1.2;linear,0.3;zoom,0.25;y,SCREEN_BOTTOM-40
StageOffCommand=accelerate,0.8;addy,150
StepsDisplayP1OnCommand=visible,false;zoom,0
StepsDisplayP1OffCommand=
StepsDisplayP2OnCommand=visible,false;zoom,0
StepsDisplayP2OffCommand=


[ScreenSelectMusic]
TimerOnCommand=%function(self) MenuTimerSet(self) end
MusicWheelX=SCREEN_CENTER_X-108
MusicWheelY=SCREEN_CENTER_Y-18
MusicWheelOffCommand=addx,-20
// Keep this Y and FOVCenterY the same.
MusicWheelOnCommand=visible,false;addx,-20;z,0;fov,58;rotationy,30;addx,40;ztest,1;
MusicWheelOffCommand=
FOVCenterX=SCREEN_CENTER_X
FOVCenterY=SCREEN_CENTER_Y-18
DoRouletteOnMenuTimer=0
WheelUnderX=SCREEN_CENTER_X-289
WheelUnderY=SCREEN_CENTER_Y-17
WheelUnderOnCommand=
WheelUnderOffCommand=
# BannerOffCommand=accelerate,0.75;addx,440
BannerOnCommand=visible,false;scaletoclipped,256,80;ztest,1;
BannerX=0
BannerY=0
BPMDisplayX=SCREEN_CENTER_X+163
BPMDisplayY=SCREEN_CENTER_Y-34
BPMDisplayOffCommand=accelerate,0.75;addx,500
BPMDisplayOnCommand=zoom,0
StepsDisplayListX=SCREEN_CENTER_X+140
StepsDisplayListY=SCREEN_CENTER_Y+2
StepsDisplayListOnCommand=rotationy,-20.0;zoomx,1;zoomy,0.94;rotationx,-2.5
StepsDisplayListOffCommand=accelerate,0.75;addx,470
StepsDisplayListShowCommand=
StepsDisplayListHideCommand=

[StepsDisplayList]
ItemsSpacingY=21.5
NumShownItems=5
CapitalizeDifficultyNames=true
MoveCommand=decelerate,0.05

[StepsDisplayListRow]
ShowDescription=true
DescriptionX=-77
DescriptionY=0
DescriptionOnCommand=halign,1;zoom,.6;shadowlength,2;maxwidth,212
DescriptionSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
		self:uppercase( param.CustomDifficulty ~= "Edit" ) \
	end \
	if param.Steps and param.Steps:IsAnEdit() and param.Steps:GetDescription() == "" then \
		self:settext("EDIT") \
	end \
end

ShowTicks=true
NumTicks=12
MaxTicks=12
TicksX=-10
TicksY=1
TicksOnCommand=halign,0;shadowlength,0;
TicksSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
	end \
end

ShowMeter=true
MeterX=-28
MeterY=0
MeterOnCommand=zoom,.7;shadowlength,0
MeterSetCommand=%function(self,param) \
	if param.CustomDifficulty then \
		self:diffuse(CustomDifficultyToColor(param.CustomDifficulty)) \
	end \
end
MoveCommand=decelerate,0.05

[MusicWheelItem]
SectionExpandedOnCommand=visible,false;zoom,0
SectionCollapsedOnCommand=visible,false;zoom,0
SectionCountOnCommand=visible,false;zoom,0

[TextBanner]
TitleX=150
TitleY=0
TitleOnCommand=visible,false;zoom,0
SubtitleX=90
SubtitleY=0
SubtitleOnCommand=visible,false;zoom,0
ArtistX=90
ArtistY=0
ArtistOnCommand=visible,false;zoom,0
ArtistPrependString=
TwoLinesTitleCommand=visible,false
TwoLinesSubtitleCommand=visible,false
TwoLinesArtistCommand=visible,false
ThreeLinesTitleCommand=visible,false
ThreeLinesSubtitleCommand=visible,false
ThreeLinesArtistCommand=visible,false
AfterSetCommand=visible,false

[MusicWheel]
ItemCurveX=90
NumWheelItems=16
ItemTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) \
local curve = math.pi; \
local WHEEL_3D_RADIUS = 185; \
local rotationx_radians = scale(offsetFromCenter,-numItems/2,numItems/2,-curve/2,curve/2); \
	self:x( 0 - math.cos(0+ WHEEL_3D_RADIUS /math.pi) ); \
	self:y( WHEEL_3D_RADIUS * math.sin(rotationx_radians) ); \
	self:z( -75 + WHEEL_3D_RADIUS * math.cos(rotationx_radians) ); \
	self:rotationx( rotationx_radians * 180/math.pi );	--[[ to degrees end]] \
end;
MusicWheelItemStartOnCommand=ztest,1;addx,-420
MusicWheelItemFinishOnCommand=sleep,0.35;linear,0.5;addx,420
MusicWheelItemStartOffCommand=
MusicWheelItemFinishOffCommand=decelerate,0.5;addx,-420
HighlightOnCommand=x,-50
HighlightOffCommand=linear,0.5;addx,-500
Use3D=1

[Player]
ReceptorArrowsYStandard=-125
ReceptorArrowsYReverse=145
HoldJudgmentY=-203

[StreamDisplay]
PillTransformFunction=function(self,offsetFromCenter,itemIndex,numItems) local native_width=32; local zoomed_width=39; self:zoomx(zoomed_width/native_width); self:y(-1) self:x(0); end
TextureCoordScaleX=1
NumPills=1
AlwaysBounceNormalBar=false
VelocityMultiplier=4
VelocityMin=-.06
VelocityMax=.02
SpringMultiplier=2.0
ViscosityMultiplier=0.2

[Judgment]
BooOddCommand=rotationz,10
GoodOddCommand=rotationz,5
GreatOddCommand=rotationz,3
MarvelousOddCommand=rotationz,0
MissOddCommand=rotationz,30
PerfectOddCommand=rotationz,0
BooEvenCommand=rotationz,-10
GoodEvenCommand=rotationz,-5
GreatEvenCommand=rotationz,-3
MarvelousEvenCommand=rotationz,0
MissEvenCommand=rotationz,-30
PerfectEvenCommand=rotationz,0
BooCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,1;accelerate,0.2;zoom,0
GoodCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,1;accelerate,0.2;zoom,0
GreatCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,1;accelerate,0.2;zoom,0
MarvelousCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,1;accelerate,0.2;zoom,0;glowshift;effectperiod,0.05;effectcolor1,1,1,1,0;effectcolor2,1,1,1,0.5
MissCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,1;accelerate,0.2;zoom,0
PerfectCommand=diffusealpha,1;zoomx,1.3;zoomy,1.7;decelerate,0.1;zoom,1;sleep,1;accelerate,0.2;zoom,0

[HoldJudgment]
HoldJudgmentLetGoCommand=diffuse,1,1,1,1;zoom,1.25;linear,0.3;zoomx,1;zoomy,1;sleep,0.5;linear,0;diffuse,1,1,1,0
HoldJudgmentHeldCommand=diffuse,1,1,1,1;zoom,1.25;linear,0.3;zoomx,1;zoomy,1;sleep,0.5;linear,0;diffuse,1,1,1,0

[Combo]
ShowComboAt=4
LabelOnCommand=zoom,2;shadowlength,4;horizalign,center;vertalign,top
LabelX=0
LabelY=20
NumberOnCommand=shadowlength,4;horizalign,center;vertalign,bottom
NumberMaxZoom=400
NumberMaxZoomAt=400
NumberMinZoom=0
NumberX=0
NumberY=30
PulseCommand=%function(self) local combo=self:GetZoom(); local newZoom=scale(combo,0,500,0.9,1.4); self:zoom(1.2*newZoom); self:linear(0.05); self:zoom(newZoom); end
PulseLabelCommand=%function(self) self:zoom(1.1); self:linear(0.05); self:zoom(1); end
FullComboGreatsCommand=stopeffect
FullComboPerfectsCommand=diffuseshift;EffectColor1,#FFFFFF;EffectColor2,#FDD599;EffectPeriod,0.5
FullComboMarvelousesCommand=diffuseshift;EffectColor1,#FFFFFF;EffectColor2,#94EBFE;EffectPeriod,0.5
FullComboBrokenCommand=stopeffect
ShowMissCombo=1

[ScreenDebugOverlay]
Class="ScreenDebugOverlay"
Fallback="Screen"

BackgroundColor=color("0,0,0,0.5")

LineOnColor=color("1,1,1,1")
LineOffColor=color("0.6,0.6,0.6,1")
LineStartY=SCREEN_TOP+50
LineSpacing=16
LineButtonX=SCREEN_CENTER_X-50
LineFunctionX=SCREEN_CENTER_X-30

ButtonTextOnCommand=NoStroke;zoom,0.8
ButtonTextToggledCommand=zoom,0.9;decelerate,0.2;zoom,0.8
FunctionTextOnCommand=NoStroke;zoom,0.8
FunctionTextToggledCommand=zoom,0.9;decelerate,0.2;zoom,0.8

PageStartX=SCREEN_CENTER_X-100
PageSpacingX=120
PageTextOnCommand=NoStroke;zoom,0.75
PageTextGainFocusCommand=diffuse,color("1,1,1,1")
PageTextLoseFocusCommand=diffuse,color("0.6,0.6,0.6,1")

DebugMenuHeaderX=SCREEN_LEFT+120
DebugMenuHeaderY=SCREEN_TOP+18
DebugMenuHeaderOnCommand=horizalign,left
DebugMenuHeaderOffCommand=

HeaderTextX=SCREEN_LEFT+20
HeaderTextY=SCREEN_TOP+18
HeaderTextOnCommand=horizalign,left
HeaderTextOffCommand=
